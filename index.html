<!DOCTYPE html>
const centrosLista = listas.centroData;


function preencher(select, valores){
select.innerHTML = `<option value=""></option>`;
valores.forEach(v => { if(v) select.innerHTML += `<option value="${v}">${v}</option>`; });
}


preencher(n1, [...new Set(ops.map(r => r[0]))]);


n1.onchange = () => {
preencher(n2, [...new Set(ops.filter(r => r[0] === n1.value).map(r => r[1]))]);
preencher(n3, []); preencher(n4, []); preencher(n5, []); preencher(centro, []);
};


n2.onchange = () => {
const cents = centrosLista.filter(r => r[0]===n2.value).map(r=>r[1]);
preencher(centro, cents);
preencher(n3, [...new Set(ops.filter(r => r[0]===n1.value && r[1]===n2.value).map(r=>r[2]))]);
};


n3.onchange = () => preencher(n4, [...new Set(ops.filter(r=>r[0]===n1.value && r[1]===n2.value && r[2]===n3.value).map(r=>r[3]))]);


n4.onchange = () => preencher(n5, [...new Set(ops.filter(r=>r[0]===n1.value && r[1]===n2.value && r[2]===n3.value && r[3]===n4.value).map(r=>r[4]))]);
}


function enviarFormulario(){
const valores = [...document.querySelectorAll(".valor")].map(v => parseFloat(v.value)||0);
const soma = valores.reduce((a,b)=>a+b,0);
const total = parseFloat(document.getElementById("valorTotal").value)||0;


if(soma !== total){
mostrarMensagem("danger", "‚ùå O total do rateio deve ser IGUAL ao valor total.");
return;
}


mostrarMensagem("success", "‚úî Pedido enviado com sucesso! Seu ID √©: #" + Math.floor(Math.random()*90000+10000));
}


function mostrarMensagem(tipo, texto){
const box = document.getElementById("mensagem");
box.className = "alert alert-"+tipo;
box.innerHTML = texto;
box.style.display = "block";
}


function searchRequests(){ mostrarMensagem("info", "üîç Busca em desenvolvimento"); }
</script>
</body>
</html>
